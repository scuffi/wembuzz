# .pre-commit-config.yaml
repos:
  # ---------- Generic hygiene ----------
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      - id: end-of-file-fixer
      - id: trailing-whitespace
      - id: check-yaml
      - id: check-merge-conflict

  # ---------- PYTHON (apps/worker && apps/api) ----------
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.6.9
    hooks:
      - id: ruff
        name: ruff (lint + fix)
        args: [--fix]
        files: ^apps/(worker|api)/.*\.py$
      - id: ruff-format
        name: ruff (format)
        files: ^apps/(worker|api)/.*\.py$

  # ---------- FRONTEND (apps/web) ----------
  - repo: local
    hooks:
      - id: web-prettier
        name: prettier (apps/web)
        entry: bash -lc "pnpm -C apps/web run format:fix"
        language: system
        pass_filenames: false
        files: ^apps/web/
      - id: web-eslint
        name: eslint (apps/web)
        entry: bash -lc "pnpm -C apps/web run lint"
        language: system
        pass_filenames: false
        files: ^apps/web/.*\.(ts|tsx|js|jsx)$
      - id: web-tsc
        name: tsc (apps/web)
        entry: bash -lc "pnpm -C apps/web run typecheck"
        language: system
        pass_filenames: false
        files: ^apps/web/.*\.(ts|tsx)$
