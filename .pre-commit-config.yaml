# .pre-commit-config.yaml
repos:
  # ---------- Generic hygiene ----------
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      - id: end-of-file-fixer
      - id: trailing-whitespace
      - id: check-yaml
      - id: check-merge-conflict

  # ---------- PYTHON (api) ----------
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.6.9
    hooks:
      - id: ruff
        name: ruff (lint + fix)
        args: [--fix]
        files: ^api/.*\.py$
      - id: ruff-format
        name: ruff (format)
        files: ^api/.*\.py$

  # ---------- FRONTEND (web) ----------
  - repo: local
    hooks:
      - id: web-prettier
        name: prettier (web)
        entry: bash -lc "pnpm -C web run format:fix"
        language: system
        pass_filenames: false
        files: ^web/
      - id: web-eslint
        name: eslint (web)
        entry: bash -lc "pnpm -C web run lint"
        language: system
        pass_filenames: false
        files: ^web/.*\.(ts|tsx|js|jsx)$
      - id: web-tsc
        name: tsc (web)
        entry: bash -lc "pnpm -C web run typecheck"
        language: system
        pass_filenames: false
        files: ^web/.*\.(ts|tsx)$
